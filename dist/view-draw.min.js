/**
 * view-draw 1.0.0
 * @license MIT
 * Copyright 2021-present Jasper Palfree
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ViewDraw={})}(this,(function(e){"use strict";var t=function(e,t,n){return e*(1-n)+t*n},n=function(e,t,n){var r=t-e;return r?(n-e)/r:1},r=function(e,n){return[t(n[0],n[1],e[0]),t(n[2],n[3],e[1])]},o=function(e,t){return[n(t[0],t[1],e[0]),n(t[2],t[3],e[1])]},i=function(e,t){var n=e.name,i=e.to,a=e.from;void 0===t&&(t=[0,1,0,1]);var c={name:n,to:i,from:a,viewbox:t,toCameraSize:function(e,t){return(e[1]-e[0])*t/(c.viewbox[1]-c.viewbox[0])},fromCameraSize:function(e,t){var n=e[1]-e[0];return(c.viewbox[1]-c.viewbox[0])*t/n},toCamera:function(e,t){return r(i(o(t,c.viewbox)),e)},fromCamera:function(e,t){return r(a(o(t,e)),c.viewbox)}};return c},a=2*Math.PI,c={to:function(e){return e},from:function(e){return e}},d={to:function(e){var t=e[0],n=e[1];return n*=a,[t*Math.cos(n),t*Math.sin(n)]},from:function(e){var t=e[0],n=e[1];return[Math.sqrt(t*t+n*n),Math.atan2(n,t)/a]}},u=Object.freeze({__proto__:null,makeProjection:i,cartesian:c,polar:d});e.createCanvas=function(e){var t=void 0===e?{}:e,n=t.autoResize,r=void 0===n||n,o=t.pixelRatio,i=void 0===o?window.devicePixelRatio||1:o,a=t.width,c=void 0===a?0:a,d=t.height,u=void 0===d?0:d,f=t.aspectRatio,s=void 0===f?16/9:f,l=t.parent,v=void 0===l?document.body:l,h=t.background,m=void 0===h?"hsl(0, 0%, 10%)":h,w=t.onResize,p=void 0===w?function(){}:w,x=document.createElement("div"),g=document.createElement("canvas"),y=g.getContext("2d"),b=!c,C=!u,M={};x.style.overflow="hidden",g.style.background=m,g.style.transform="scale("+1/i+")",g.style.transformOrigin="top left";var P=function(){b&&(c=v.offsetWidth),C&&(u=c/s),M.width=c,M.height=u,g.width=i*c,g.height=i*u,x.style.width=c+"px",x.style.height=u+"px",p(M)};return x.appendChild(g),v.appendChild(x),r&&window.addEventListener("resize",P),P(),{canvas:g,ctx:y,destroy:function(){r&&window.removeEventListener("resize",P),g.parentNode.removeChild(g)},dimensions:M}},e.createView=function(e,t,n){"string"==typeof e?e=u[e]:"object"!==e&&(n=t,t=e,e=c),Array.isArray(t)||(n=t,t=void 0);var r=i(e,t),o={center:[0,0],scale:1},a={proj:r,init:function(e){e!==a.canvas&&(a.canvas=e,a.ctx=e.getContext("2d")),a.width=e.width,a.height=e.height,a.bounds=e.getBoundingClientRect();var t=a.width/a.bounds.width,n=.5*o.scale*a.width/t,i=.5*o.scale*a.height/t,c=Math.max(n,i),d=r.to(o.center);return a.cameraBounds=[-d[0]*c+n,(1-d[0])*c+n,-d[1]*c+i,(1-d[1])*c+i],a.ctx.setTransform(t,0,0,t,0,0),a},clear:function(){a.ctx.clearRect(0,0,a.width,a.height)},color:function(e){return a.ctx.fillStyle!==e&&(a.ctx.fillStyle=e),a.ctx.strokeStyle!==e&&(a.ctx.strokeStyle=e),a},dot:function(e){var t=a.ctx,n=r.toCamera(a.cameraBounds,e),o=n[0],i=n[1];t.beginPath(),t.arc(o,i,1,0,2*Math.PI),t.fill()},circle:function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=0);var i=a.ctx,c=r.toCamera(a.cameraBounds,e),d=c[0],u=c[1];return t=r.toCameraSize(a.cameraBounds,t),i.beginPath(),i.arc(d,u,t,0,2*Math.PI),n&&i.fill(),o&&(i.lineWidth!==o&&(i.lineWidth=o),i.stroke()),a}};return o.getMousePos=function(e,t){a.init(t);var n=[e.pageX-a.bounds.left,e.pageY-a.bounds.top];return r.fromCamera(a.cameraBounds,n)},o.camera=function(e,t){return void 0===t&&(t=1),o.center=e,o.scale=1/t,o},o.draw=function(e){a.init(e),a.clear();for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[a].concat(r)),o},o.drawOver=function(e){a.init(e);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[a].concat(r)),o},o},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy1kcmF3Lm1pbi5qcyIsInNvdXJjZXMiOltdLCJzb3VyY2VzQ29udGVudCI6W10sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIifQ==
